########################################################################################################################
# Configuration for TMUX 2.7
########################################################################################################################

# Set terminal to support 256 colors
set -g default-terminal "tmux-256color"

# Set terminal window title
set -g set-titles on

# Set Vi key bindings
setw -g mode-keys vi

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

########################################################################################################################
# Mouse
########################################################################################################################

set -g mouse on
# set -g mouse-select-window on
# set -g mouse-select-pane on
# set -g mouse-resize-pane on

########################################################################################################################
# Status bar
########################################################################################################################

set -g status-fg colour250
set -g status-bg colour235

# Status left ##################################################################

set -g status-left ''
set -g status-left-length 20

# Status right #################################################################

# Copy mode indicator
set -g status-right '#{?pane_in_mode,#[fg=colour235]#[bg=colour150] COPY #[fg=colour255]#[bg=colour235],}'

# Prefix indicator
set -ga status-right '#{?client_prefix,#[fg=colour235]#[bg=colour117] PREFIX #[fg=colour255]#[bg=colour235],}'

# Date and session info
set -ga status-right '#[fg=colour255] %d-%b %H:%M #[fg=colour235,bg=colour250] #S '

set -g status-right-length 50

# Window status ################################################################

setw -g window-status-current-fg colour235
setw -g window-status-current-bg colour250
setw -g window-status-current-format ' #I:#W#[fg=colour88]#F '

setw -g window-status-fg colour250
setw -g window-status-bg colour240
setw -g window-status-format ' #I:#W#[fg=colour110]#F '

########################################################################################################################
# Command line
########################################################################################################################

set -g message-fg colour235
set -g message-bg colour255

########################################################################################################################
# Clock & selection
########################################################################################################################

setw -g clock-mode-colour colour245
setw -g mode-fg colour235
setw -g mode-bg colour250

########################################################################################################################
# Panes
########################################################################################################################

set -g pane-border-bg colour0
set -g pane-border-fg colour240
set -g pane-active-border-bg colour0
set -g pane-active-border-fg colour255

########################################################################################################################
# Clipboard
########################################################################################################################

# Activate clipboard
set -g set-clipboard on
set -s set-clipboard on

# Key bindings for copy mode with clipboard integration
bind-key 'b' copy-mode
bind-key -T copy-mode-vi 'v' send-keys -X begin-selection

if-shell "command -v xclip" \
    "bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel 'xclip -selection clipboard'" \
    "bind-key -T copy-mode-vi 'y' send-keys -X copy-selection-and-cancel"

if-shell "command -v xclip" \
    "bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel 'xclip -selection clipboard'" \
    "bind-key -T copy-mode-vi Enter send-keys -X copy-selection-and-cancel"

########################################################################################################################
